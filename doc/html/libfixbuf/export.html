<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libfixbuf: Exporter Usage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Exporter Usage </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_doc_export"></a> </p>
<h1><a class="anchor" id="how-to-export-ipfix"></a>
How-To Export IPFIX</h1>
<p >Each fixbuf application must have a single <a class="el" href="public_8h.html#a7403b5635628fcc24eeb03b73c0b08bd">fbInfoModel_t</a> instance that represents the Information Elements that the application understands. The <a class="el" href="public_8h.html#a23b1973cadfc63b05fabe6091ce48875" title="Allocates a new information model.">fbInfoModelAlloc()</a> call allocates a new Information Model with the IANA-managed information elements (current as of the fixbuf release date) preloaded. Additional vendor-specific information elements may be added with <a class="el" href="public_8h.html#a4244c83afec83db26a1924fda60f57de" title="Adds a single information element to an information model.">fbInfoModelAddElement()</a>, <a class="el" href="public_8h.html#ac2b0be79429a02c8026ce7ea8f9ab2e5" title="Adds multiple information elements in an array to an information model.">fbInfoModelAddElementArray()</a>, <a class="el" href="public_8h.html#af72db51fd417df411a82909c5fd5d84d" title="Adds information specified in the given XML file to the information model.">fbInfoModelReadXMLFile()</a>, and <a class="el" href="public_8h.html#a2bbcf6d4a777ed7e0a2c364e0662b9f3" title="Adds information specified in the given XML data to the information model.">fbInfoModelReadXMLData()</a>.</p>
<p >To create an Exporter, first create an <a class="el" href="public_8h.html#a8441ccbdab7eaccc081dae0e3af32855">fbSession_t</a> attached to the application's <a class="el" href="public_8h.html#a7403b5635628fcc24eeb03b73c0b08bd">fbInfoModel_t</a> to hold the Exporter's Transport Session state using <a class="el" href="public_8h.html#a19d0dfe113d61cdabf601ca79c3049c8" title="Allocates an empty transport session state container.">fbSessionAlloc()</a>.</p>
<p >Then create an <a class="el" href="public_8h.html#a054d6ae24ecc9fbc2e38e683d8a5481a">fbExporter_t</a> to encapsulate the connection to the Collecting Process or the file on disk, using the <a class="el" href="public_8h.html#ab3bb271c645c2e346bdf326d128d4495" title="Allocates an exporting process endpoint for an opened ANSI C file pointer.">fbExporterAllocFP()</a>, <a class="el" href="public_8h.html#a66e4d68eeae6049924a00ac884774b42" title="Allocates an exporting process endpoint for a named file.">fbExporterAllocFile()</a>, <a class="el" href="public_8h.html#a76ef9b4b76187e451fa1196ceb0fd887" title="Allocates an exporting process endpoint for a network connection.">fbExporterAllocNet()</a>, or <a class="el" href="public_8h.html#a799054439b578abffa39c0ee8762bea6" title="Allocates an exporting process to use the existing buffer buf having the specified size.">fbExporterAllocBuffer()</a> calls.</p>
<p >With an fbSession_t and an fbExporter_t available, create a Buffer (<a class="el" href="public_8h.html#ab1479ebe89aecd202bb628c33102129b">fBuf_t</a>) for writing via <a class="el" href="public_8h.html#a92c9965c452294b11eaf10c34a7f9629" title="Allocates a new buffer for export.">fBufAllocForExport()</a>.</p>
<p >Create and populate templates for addition to this session using <a class="el" href="public_8h.html#ad29df497298e072387af52c3a758f268" title="Allocates a new empty template.">fbTemplateAlloc()</a> and <a class="el" href="public_8h.html#afdf4a52e9f867433d46a1d4d8ec4bc8f" title="Appends information elements described by a specifier array to a template.">fbTemplateAppendSpecArray()</a>, <a class="el" href="public_8h.html#aa26aa2d6a6b57dba79d2b5742b4a7540" title="Potentially appends an information element described by the specifier to a template.">fbTemplateAppendSpec()</a>, <a class="el" href="public_8h.html#a72db5a960f00cd94e223d0fc6b7df0a4" title="Appends an information element to a template.">fbTemplateAppend()</a>, <a class="el" href="public_8h.html#a929bf7b453495c42935614fbd0b57d50" title="Appends information elements described by a specifier array to a template.">fbTemplateAppendArraySpecId()</a>, or fbTemlateAppendSpecId(). The layout of the template usually matches the C <code>struct</code> that holds the record. For details see <a href="templates.html">Template Definition</a>.</p>
<p >Add the templates to the session via <a class="el" href="public_8h.html#a5a23a76ff4edff6616b5db2fbd63644f" title="Adds a Template to a Session.">fbSessionAddTemplate()</a>. Typically each template is added to the session twice, once as an internal template---which describes how the record appears in memory---and again as an external template---which describes how the record appears in the IPFIX message. A convenience function, <a class="el" href="public_8h.html#a525465e592ae165c0460f0fade217080" title="Adds a Template to a Session being used for export as both an internal template and an external templ...">fbSessionAddTemplatesForExport()</a>, exists to do this for you.</p>
<p >In this tutorial, the output Buffer (the <a class="el" href="public_8h.html#ab1479ebe89aecd202bb628c33102129b">fBuf_t</a>) is created before adding external Templates to the Session, and calling <a class="el" href="public_8h.html#a5a23a76ff4edff6616b5db2fbd63644f" title="Adds a Template to a Session.">fbSessionAddTemplate()</a> automatically adds the Templates to the Buffer. It is also possible to add Templates to a Session before creating the Buffer. In that case, one calls <a class="el" href="public_8h.html#a4e0c42fc80985c048190203257697ab6" title="Exports all external templates in the current domain of a given session.">fbSessionExportTemplates()</a> to add the Templates to the output Buffer. (<a class="el" href="public_8h.html#a4e0c42fc80985c048190203257697ab6" title="Exports all external templates in the current domain of a given session.">fbSessionExportTemplates()</a> writes all Templates to the output Buffer; calling it needlessly results in the Template definitions appearing multiple times in the output.)</p>
<p >To write data, set the internal and external template IDs with <a class="el" href="public_8h.html#a28c6c56234351a793fd513b212bd31b8" title="Sets the internal template on a buffer to the given template ID.">fBufSetInternalTemplate()</a> and <a class="el" href="public_8h.html#af6cd20b1eb9a3287f17587888ee2476b" title="Sets the external template for export on a buffer to the given template ID.">fBufSetExportTemplate()</a> or with the convenience function <a class="el" href="public_8h.html#a854bf2cafc298bef1eb442e4c8adc63c" title="Sets the internal and external templates on a Buffer to the given template ID.">fBufSetTemplatesForExport()</a>. You can then use <a class="el" href="public_8h.html#ad3fdaa8626ff753c5b617707698c22b6" title="Appends a record to a buffer.">fBufAppend()</a> to write records into IPFIX Messages and Messages to the output stream.</p>
<p >When exporting multiple record formats, you must call <a class="el" href="public_8h.html#a854bf2cafc298bef1eb442e4c8adc63c" title="Sets the internal and external templates on a Buffer to the given template ID.">fBufSetTemplatesForExport()</a> or the <a class="el" href="public_8h.html#a28c6c56234351a793fd513b212bd31b8" title="Sets the internal template on a buffer to the given template ID.">fBufSetInternalTemplate()</a> and <a class="el" href="public_8h.html#af6cd20b1eb9a3287f17587888ee2476b" title="Sets the external template for export on a buffer to the given template ID.">fBufSetExportTemplate()</a> pair whenever the record format changes.</p>
<p >By default, <a class="el" href="public_8h.html#ad3fdaa8626ff753c5b617707698c22b6" title="Appends a record to a buffer.">fBufAppend()</a> will emit an IPFIX Message to the output stream when the end of the message buffer is reached on write. The <a class="el" href="public_8h.html#a43af06a2929be582b0d7197f0c13e25a" title="Sets the automatic next-message mode flag on a Buffer.">fBufSetAutomaticNextMessage()</a> call can be used to modify this behavior, causing <a class="el" href="public_8h.html#ad3fdaa8626ff753c5b617707698c22b6" title="Appends a record to a buffer.">fBufAppend()</a> to return FB_ERROR_EOM when at end of message. Use this if your application requires manual control of message export. In this case, <a class="el" href="public_8h.html#a3def007c235fd0dccb7a2293b23341e1" title="Emits the message currently in a buffer using the associated exporting process endpoint.">fBufEmit()</a> will emit a Message to the output stream. If your exporter was created via <a class="el" href="public_8h.html#a799054439b578abffa39c0ee8762bea6" title="Allocates an exporting process to use the existing buffer buf having the specified size.">fbExporterAllocBuffer()</a>, you may use <a class="el" href="public_8h.html#a2535bd2cfbdffc162e8a4ee53407ebe5" title="Gets the (transcoded) message length that was copied to the exporting buffer upon fBufEmit() when usi...">fbExporterGetMsgLen()</a> to get the message length.</p>
<p >If not in automatic mode and a session's templates do not fit into a single message, use <a class="el" href="public_8h.html#a9236bdb53a94cd19bad3fef2c9bfb947" title="Exports a single external fbTemplate_t in the current domain of a given Session.">fbSessionExportTemplate()</a> to export each template individually instead of relying on <a class="el" href="public_8h.html#a4e0c42fc80985c048190203257697ab6" title="Exports all external templates in the current domain of a given session.">fbSessionExportTemplates()</a>.</p>
<p >Manual control of message export is incompatible with template and information element metadata (<a class="el" href="public_8h.html#ab7dad407b7dc4409ab06ec796c0b0ed7" title="Configures a Session to export template metadata (fbTemplateInfo_t) as options records.">fbSessionSetMetadataExportTemplates()</a> and <a class="el" href="public_8h.html#a2e729b270df473a1f32f519ed184a259" title="Configures a session to export type information for enterprise-specific information elements as optio...">fbSessionSetMetadataExportElements()</a>). There are several functions that may cause the metadata options records to be exported, and the Session must be free to create a new record set or template set as needed.</p>
<p >Complete <code>sample_exporter.c</code> program:</p>
 <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="public_8h.html">fixbuf/public.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#define FATAL(e)                                \</span></div>
<div class="line"><span class="preprocessor">    { fprintf(stderr, &quot;Failed at %s:%d: %s\n&quot;</span>,  \</div>
<div class="line">              __FILE__, __LINE__, e-&gt;message);  \</div>
<div class="line">        exit(1); }</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="public_8h.html#structfb_info_element_spec__st">fbInfoElementSpec_t</a> exportTemplate[] = {</div>
<div class="line">        {<span class="stringliteral">&quot;flowStartMilliseconds&quot;</span>,               8, 0 },</div>
<div class="line">        {<span class="stringliteral">&quot;flowEndMilliseconds&quot;</span>,                 8, 0 },</div>
<div class="line">        {<span class="stringliteral">&quot;octetTotalCount&quot;</span>,                     8, 0 },</div>
<div class="line">        {<span class="stringliteral">&quot;packetTotalCount&quot;</span>,                    8, 0 },</div>
<div class="line">        {<span class="stringliteral">&quot;sourceIPv4Address&quot;</span>,                   4, 0 },</div>
<div class="line">        {<span class="stringliteral">&quot;destinationIPv4Address&quot;</span>,              4, 0 },</div>
<div class="line">        {<span class="stringliteral">&quot;sourceTransportPort&quot;</span>,                 2, 0 },</div>
<div class="line">        {<span class="stringliteral">&quot;destinationTransportPort&quot;</span>,            2, 0 },</div>
<div class="line">        {<span class="stringliteral">&quot;protocolIdentifier&quot;</span>,                  1, 0 },</div>
<div class="line">        {<span class="stringliteral">&quot;paddingOctets&quot;</span>,                       3, 0 },</div>
<div class="line">        {<span class="stringliteral">&quot;ipPayloadPacketSection&quot;</span>,              0, 0 },</div>
<div class="line">        <a class="code hl_define" href="public_8h.html#ae7f1800b8e6f3d6461798f9c9c6127a1">FB_IESPEC_NULL</a></div>
<div class="line">    };</div>
<div class="line">    <span class="keyword">struct </span>exportRecord_st {</div>
<div class="line">        uint64_t      flowStartMilliseconds;</div>
<div class="line">        uint64_t      flowEndMilliseconds;</div>
<div class="line">        uint64_t      octetTotalCount;</div>
<div class="line">        uint64_t      packetTotalCount;</div>
<div class="line">        uint32_t      sourceIPv4Address;</div>
<div class="line">        uint32_t      destinationIPv4Address;</div>
<div class="line">        uint16_t      sourceTransportPort;</div>
<div class="line">        uint16_t      destinationTransportPort;</div>
<div class="line">        uint8_t       protocolIdentifier;</div>
<div class="line">        uint8_t       padding[3];</div>
<div class="line">        <a class="code hl_struct" href="public_8h.html#structfb_varfield__st">fbVarfield_t</a>  payload;</div>
<div class="line">    } exportRecord;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="public_8h.html#a7403b5635628fcc24eeb03b73c0b08bd">fbInfoModel_t</a>   *model;</div>
<div class="line">    <a class="code hl_typedef" href="public_8h.html#a8441ccbdab7eaccc081dae0e3af32855">fbSession_t</a>     *session;</div>
<div class="line">    <a class="code hl_typedef" href="public_8h.html#a054d6ae24ecc9fbc2e38e683d8a5481a">fbExporter_t</a>    *exporter;</div>
<div class="line">    <a class="code hl_struct" href="private_8h.html#structfb_template__st">fbTemplate_t</a>    *tmpl;</div>
<div class="line">    <a class="code hl_typedef" href="public_8h.html#ab1479ebe89aecd202bb628c33102129b">fBuf_t</a>          *fbuf;</div>
<div class="line">    uint16_t         tid;</div>
<div class="line">    <span class="keywordtype">int</span>              i;</div>
<div class="line">    GError          *err = NULL;</div>
<div class="line"> </div>
<div class="line">    memset(&amp;exportRecord, 0, <span class="keyword">sizeof</span>(exportRecord));</div>
<div class="line"> </div>
<div class="line">    model = <a class="code hl_function" href="public_8h.html#a23b1973cadfc63b05fabe6091ce48875">fbInfoModelAlloc</a>();</div>
<div class="line">    <span class="comment">//  Use if needed to define elements used by YAF.</span></div>
<div class="line">    <span class="comment">//if (!fbInfoModelReadXMLFile(model, &quot;cert_ipfix.xml&quot;, &amp;err))</span></div>
<div class="line">    <span class="comment">//    FATAL(err);</span></div>
<div class="line"> </div>
<div class="line">    session = <a class="code hl_function" href="public_8h.html#a19d0dfe113d61cdabf601ca79c3049c8">fbSessionAlloc</a>(model);</div>
<div class="line">    exporter = <a class="code hl_function" href="public_8h.html#ab3bb271c645c2e346bdf326d128d4495">fbExporterAllocFP</a>(stdout);</div>
<div class="line"> </div>
<div class="line">    fbuf = <a class="code hl_function" href="public_8h.html#a92c9965c452294b11eaf10c34a7f9629">fBufAllocForExport</a>(session, exporter);</div>
<div class="line"> </div>
<div class="line">    tmpl = <a class="code hl_function" href="public_8h.html#ad29df497298e072387af52c3a758f268">fbTemplateAlloc</a>(model);</div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code hl_function" href="public_8h.html#afdf4a52e9f867433d46a1d4d8ec4bc8f">fbTemplateAppendSpecArray</a>(tmpl, exportTemplate, ~0, &amp;err))</div>
<div class="line">        FATAL(err);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!(tid = <a class="code hl_function" href="public_8h.html#a525465e592ae165c0460f0fade217080">fbSessionAddTemplatesForExport</a>(</div>
<div class="line">              session, <a class="code hl_define" href="public_8h.html#a243165c146a8fbda7e0902a06abce6a4">FB_TID_AUTO</a>, tmpl, NULL, &amp;err)))</div>
<div class="line">        FATAL(err);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//  No need to call this since templates were added after</span></div>
<div class="line">    <span class="comment">//  the Session and Exporter were linked to the fBuf_t.</span></div>
<div class="line">    <span class="comment">//if (!fbSessionExportTemplates(session, &amp;err))</span></div>
<div class="line">    <span class="comment">//    FATAL(err);</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code hl_function" href="public_8h.html#a854bf2cafc298bef1eb442e4c8adc63c">fBufSetTemplatesForExport</a>(fbuf, tid, &amp;err))</div>
<div class="line">        FATAL(err);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//  This sample exports 5 records</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; 5; ++i) {</div>
<div class="line">        <span class="comment">//  Fill the exportRecord with data</span></div>
<div class="ttc" id="aprivate_8h_html_structfb_template__st"><div class="ttname"><a href="private_8h.html#structfb_template__st">fbTemplate_st</a></div><div class="ttdoc">An IPFIX template or options template structure.</div><div class="ttdef"><b>Definition:</b> private.h:108</div></div>
<div class="ttc" id="apublic_8h_html"><div class="ttname"><a href="public_8h.html">public.h</a></div><div class="ttdoc">Fixbuf IPFIX protocol library public interface.</div></div>
<div class="ttc" id="apublic_8h_html_a054d6ae24ecc9fbc2e38e683d8a5481a"><div class="ttname"><a href="public_8h.html#a054d6ae24ecc9fbc2e38e683d8a5481a">fbExporter_t</a></div><div class="ttdeci">struct fbExporter_st fbExporter_t</div><div class="ttdoc">IPFIX Exporting Process endpoint.</div><div class="ttdef"><b>Definition:</b> public.h:2077</div></div>
<div class="ttc" id="apublic_8h_html_a19d0dfe113d61cdabf601ca79c3049c8"><div class="ttname"><a href="public_8h.html#a19d0dfe113d61cdabf601ca79c3049c8">fbSessionAlloc</a></div><div class="ttdeci">fbSession_t * fbSessionAlloc(fbInfoModel_t *model)</div><div class="ttdoc">Allocates an empty transport session state container.</div></div>
<div class="ttc" id="apublic_8h_html_a23b1973cadfc63b05fabe6091ce48875"><div class="ttname"><a href="public_8h.html#a23b1973cadfc63b05fabe6091ce48875">fbInfoModelAlloc</a></div><div class="ttdeci">fbInfoModel_t * fbInfoModelAlloc(void)</div><div class="ttdoc">Allocates a new information model.</div></div>
<div class="ttc" id="apublic_8h_html_a243165c146a8fbda7e0902a06abce6a4"><div class="ttname"><a href="public_8h.html#a243165c146a8fbda7e0902a06abce6a4">FB_TID_AUTO</a></div><div class="ttdeci">#define FB_TID_AUTO</div><div class="ttdoc">Template ID argument used when adding an fbTemplate_t to an fbSession_t that automatically assigns a ...</div><div class="ttdef"><b>Definition:</b> public.h:1574</div></div>
<div class="ttc" id="apublic_8h_html_a525465e592ae165c0460f0fade217080"><div class="ttname"><a href="public_8h.html#a525465e592ae165c0460f0fade217080">fbSessionAddTemplatesForExport</a></div><div class="ttdeci">uint16_t fbSessionAddTemplatesForExport(fbSession_t *session, uint16_t tid, fbTemplate_t *tmpl, fbTemplateInfo_t *tmplInfo, GError **err)</div><div class="ttdoc">Adds a Template to a Session being used for export as both an internal template and an external templ...</div></div>
<div class="ttc" id="apublic_8h_html_a7403b5635628fcc24eeb03b73c0b08bd"><div class="ttname"><a href="public_8h.html#a7403b5635628fcc24eeb03b73c0b08bd">fbInfoModel_t</a></div><div class="ttdeci">struct fbInfoModel_st fbInfoModel_t</div><div class="ttdoc">An IPFIX information model.</div><div class="ttdef"><b>Definition:</b> public.h:164</div></div>
<div class="ttc" id="apublic_8h_html_a8441ccbdab7eaccc081dae0e3af32855"><div class="ttname"><a href="public_8h.html#a8441ccbdab7eaccc081dae0e3af32855">fbSession_t</a></div><div class="ttdeci">struct fbSession_st fbSession_t</div><div class="ttdoc">An IPFIX Transport Session state container.</div><div class="ttdef"><b>Definition:</b> public.h:1711</div></div>
<div class="ttc" id="apublic_8h_html_a854bf2cafc298bef1eb442e4c8adc63c"><div class="ttname"><a href="public_8h.html#a854bf2cafc298bef1eb442e4c8adc63c">fBufSetTemplatesForExport</a></div><div class="ttdeci">gboolean fBufSetTemplatesForExport(fBuf_t *fbuf, uint16_t tid, GError **err)</div><div class="ttdoc">Sets the internal and external templates on a Buffer to the given template ID.</div></div>
<div class="ttc" id="apublic_8h_html_a92c9965c452294b11eaf10c34a7f9629"><div class="ttname"><a href="public_8h.html#a92c9965c452294b11eaf10c34a7f9629">fBufAllocForExport</a></div><div class="ttdeci">fBuf_t * fBufAllocForExport(fbSession_t *session, fbExporter_t *exporter)</div><div class="ttdoc">Allocates a new buffer for export.</div></div>
<div class="ttc" id="apublic_8h_html_ab1479ebe89aecd202bb628c33102129b"><div class="ttname"><a href="public_8h.html#ab1479ebe89aecd202bb628c33102129b">fBuf_t</a></div><div class="ttdeci">struct fBuf_st fBuf_t</div><div class="ttdoc">An IPFIX message buffer.</div><div class="ttdef"><b>Definition:</b> public.h:139</div></div>
<div class="ttc" id="apublic_8h_html_ab3bb271c645c2e346bdf326d128d4495"><div class="ttname"><a href="public_8h.html#ab3bb271c645c2e346bdf326d128d4495">fbExporterAllocFP</a></div><div class="ttdeci">fbExporter_t * fbExporterAllocFP(FILE *fp)</div><div class="ttdoc">Allocates an exporting process endpoint for an opened ANSI C file pointer.</div></div>
<div class="ttc" id="apublic_8h_html_ad29df497298e072387af52c3a758f268"><div class="ttname"><a href="public_8h.html#ad29df497298e072387af52c3a758f268">fbTemplateAlloc</a></div><div class="ttdeci">fbTemplate_t * fbTemplateAlloc(fbInfoModel_t *model)</div><div class="ttdoc">Allocates a new empty template.</div></div>
<div class="ttc" id="apublic_8h_html_ae7f1800b8e6f3d6461798f9c9c6127a1"><div class="ttname"><a href="public_8h.html#ae7f1800b8e6f3d6461798f9c9c6127a1">FB_IESPEC_NULL</a></div><div class="ttdeci">#define FB_IESPEC_NULL</div><div class="ttdoc">Convenience macro defining a null information element specification initializer (fbInfoElementSpec_t)...</div><div class="ttdef"><b>Definition:</b> public.h:1596</div></div>
<div class="ttc" id="apublic_8h_html_afdf4a52e9f867433d46a1d4d8ec4bc8f"><div class="ttname"><a href="public_8h.html#afdf4a52e9f867433d46a1d4d8ec4bc8f">fbTemplateAppendSpecArray</a></div><div class="ttdeci">gboolean fbTemplateAppendSpecArray(fbTemplate_t *tmpl, const fbInfoElementSpec_t *spec, uint32_t wantedFlags, GError **err)</div><div class="ttdoc">Appends information elements described by a specifier array to a template.</div></div>
<div class="ttc" id="apublic_8h_html_structfb_info_element_spec__st"><div class="ttname"><a href="public_8h.html#structfb_info_element_spec__st">fbInfoElementSpec_st</a></div><div class="ttdoc">A single IPFIX Information Element specification.</div><div class="ttdef"><b>Definition:</b> public.h:1606</div></div>
<div class="ttc" id="apublic_8h_html_structfb_varfield__st"><div class="ttname"><a href="public_8h.html#structfb_varfield__st">fbVarfield_st</a></div><div class="ttdoc">A variable-length field value.</div><div class="ttdef"><b>Definition:</b> public.h:147</div></div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code hl_function" href="public_8h.html#ad3fdaa8626ff753c5b617707698c22b6">fBufAppend</a>(fbuf, (uint8_t *)&amp;exportRecord,</div>
<div class="line">                        <span class="keyword">sizeof</span>(exportRecord), &amp;err))</div>
<div class="line">            FATAL(err);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code hl_function" href="public_8h.html#a3def007c235fd0dccb7a2293b23341e1">fBufEmit</a>(fbuf, &amp;err))</div>
<div class="line">        FATAL(err);;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//  This frees the Buffer, Session, Templates, and Exporter.</span></div>
<div class="line">    <a class="code hl_function" href="public_8h.html#a064ee09c33f86ac3b4e87320c2ae6463">fBufFree</a>(fbuf);</div>
<div class="line">    <a class="code hl_function" href="public_8h.html#a860639c9f5bdf973a8c303aa9f513454">fbInfoModelFree</a>(model);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><span class="comment">// EndOfExample</span></div>
<div class="ttc" id="apublic_8h_html_a064ee09c33f86ac3b4e87320c2ae6463"><div class="ttname"><a href="public_8h.html#a064ee09c33f86ac3b4e87320c2ae6463">fBufFree</a></div><div class="ttdeci">void fBufFree(fBuf_t *fbuf)</div><div class="ttdoc">Frees a buffer.</div></div>
<div class="ttc" id="apublic_8h_html_a3def007c235fd0dccb7a2293b23341e1"><div class="ttname"><a href="public_8h.html#a3def007c235fd0dccb7a2293b23341e1">fBufEmit</a></div><div class="ttdeci">gboolean fBufEmit(fBuf_t *fbuf, GError **err)</div><div class="ttdoc">Emits the message currently in a buffer using the associated exporting process endpoint.</div></div>
<div class="ttc" id="apublic_8h_html_a860639c9f5bdf973a8c303aa9f513454"><div class="ttname"><a href="public_8h.html#a860639c9f5bdf973a8c303aa9f513454">fbInfoModelFree</a></div><div class="ttdeci">void fbInfoModelFree(fbInfoModel_t *model)</div><div class="ttdoc">Frees an information model.</div></div>
<div class="ttc" id="apublic_8h_html_ad3fdaa8626ff753c5b617707698c22b6"><div class="ttname"><a href="public_8h.html#ad3fdaa8626ff753c5b617707698c22b6">fBufAppend</a></div><div class="ttdeci">gboolean fBufAppend(fBuf_t *fbuf, uint8_t *recbase, size_t recsize, GError **err)</div><div class="ttdoc">Appends a record to a buffer.</div></div>
</div><!-- fragment --><p> Previous: <a href="howto.html">Using libfixbuf in Your Program</a> | Next: <a href="read.html">IPFIX File Collectors</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</body>
</html>
